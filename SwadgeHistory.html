<!DOCTYPE html>
<html>
	<head>
		<title>Swadge History</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
		<style>
			#container {
				height: 100%;
				width: 100%;
				display: flex;
				align-items: center;
			}
			#left {
				width: 64px;
			}
			#right {
				width: 100%;
			}
			
			.yt_link_container {
				height: 100%;
				width: 100%;
				display: flex;
				flex-wrap: wrap;
				align-items: center;
			}

			.youtube-player {
				position: relative;
				overflow: hidden;
				background: #000;
				margin: 5px;
				width: 560px;
				height: 315px;
			}

			.youtube-player iframe {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				z-index: 100;
				background: transparent;
			}

			.youtube-player img {
				object-fit: cover;
				display: block;
				left: 0;
				bottom: 0;
				margin: auto;
				max-width: 100%;
				width: 100%;
				position: absolute;
				right: 0;
				top: 0;
				border: none;
				height: auto;
				cursor: pointer;
				-webkit-transition: 0.4s all;
				-moz-transition: 0.4s all;
				transition: 0.4s all;
			}

			.youtube-player img:hover {
				-webkit-filter: brightness(75%);
			}

			.youtube-player .play {
				height: 72px;
				width: 72px;
				left: 50%;
				top: 50%;
				margin-left: -36px;
				margin-top: -36px;
				position: absolute;
				background: url('https://i.imgur.com/TxzC70f.png') no-repeat;
				cursor: pointer;
			}
		</style>

		<template id="main_template">
			<div id="ANCHOR">
				<h2 class="item_title">TEXT</h2>
				<div class="item_desc">TEXT</div>
				<div id="container" class="gh_link_container">
					<div id="left">
						<img src="swadge_imgs/GitHub-Mark-64px.png" width="64" height="64">
					</div>
					<div id="right" class="item_github">TEXT</div>
				</div>
				<div id="container" class="sw_link_container">
					<div id="left">
						<img src="swadge_imgs/swadge_icon.png" width="64" height="64">
					</div>
					<div id="right" class="item_swadge_com">TEXT</div>
				</div>
				<div id="container" class="mn_link_container">
					<div id="left">
						<img src="swadge_imgs/manual-book.png" width="64" height="64">
					</div>
					<div id="right" class="item_swadge_manuals">TEXT</div>
				</div>
				<div class="imgs_container">TEXT</div>
				<div class="yt_link_container">TEXT</div>
				<hr>
			</div>
		</template>

		<template id="sidebar_template">
			<div id="sidebar_link"><a href="#ANCHOR" class="w3-bar-item w3-button">TEXT</a></div>
		</template>

		<script>
			var data =
			[
				{
					year: 2013,
					name: "Water Chip",
					desc: "TODO Description",
					yt_links: ["LT3mv_EQp5Q", "5rhXUWMOKPk", "GdECYJA4iF0"],
					gh_links: [{url: "https://github.com/cnlohr/magfestbadges", text: "Github Repo"}],
					sw_links: [],
					imgs: [],
					manuals: []
				},
				{
					year: 2017,
					name: "Castlevania (Super)",
					desc: "TODO Description",
					yt_links: ["8WCIu-3OFEQ", "DbjlStyMmaY"],
					gh_links: [{url: "https://github.com/magfest/MAGFest-2017-Swadges", text: "Github Repo (Hardware)"},
							   {url: "https://github.com/cnlohr/swadges2017", text: "Github Repo (Firmware)"}],
					sw_links: [],
					imgs: [],
					manuals: []
				},
				{
					year: 2017,
					name: "Sonic (West)",
					desc: "TODO Description",
					yt_links: ["l3BDuRtbuNA", "_78K70HH-eQ", "KFAsCKyT0lg"],
					gh_links: [{url: "https://github.com/magfest/MAGWest-2017-Swadges", text: "Github Repo"}],
					sw_links: ["https://swadge.com/magwest/"],
					imgs: [],
					manuals: []
				},
				{
					year: 2017,
					name: "Bioshock (Labs)",
					desc: "TODO Description",
					yt_links: ["E1RngZtJzF4"],
					gh_links: [{url: "https://github.com/magfest/MAGLabs-2017-Badges", text: "Github Repo (Hardware)"}],
					sw_links: ["https://swadge.com/maglabs-2017/"],
					imgs: [],
					manuals: []
				},
				{
					year: 2018,
					name: "King Donut",
					desc: "TODO Description",
					yt_links: ["SVV12p-pIGk", "y8iGXTb6sWw"],
					gh_links: [{url: "https://github.com/cnlohr/donut", text: "Github Repo"}],
					sw_links: ["https://swadge.com/donut/"],
					imgs: [],
					manuals: []
				},
				{
					year: 2018,
					name: "Wagon (Stock)",
					desc: "TODO Description",
					yt_links: [],
					gh_links: [{url: "https://github.com/cnlohr/magstock2018", text: "Github Repo"}],
					sw_links: ["https://swadge.com/magstock-2018/"],
					imgs: ["wagon_top.png", "wagon_bottom.png"],
					manuals: []
				},
				{
					year: 2019,
					name: "Reflector",
					desc: "TODO Description",
					yt_links: ["OvCkdXIwe28", "AGZIFDTMiNc", "hfqV1GamDgA", "OynwAmAuaw0", "hjsh4uEY-fk", "TBrHIFqIWhw", "4qPR-8rzkdE", "hq6Oc0iuRV8", "oDES-gMcwGM", "Z6drU6sBMkE"],
					gh_links: [{url: "https://github.com/cnlohr/swadge2019", text: "Github Repo"}],
					sw_links: ["https://swadge.com/super2019/"],
					imgs: [],
					manuals: ["swadge_instructions.jpg", "swadge_attach_instructions-768x994.jpg"]
				},
				{
					year: 2020,
					name: "Barrel & Banana",
					desc: "TODO Description",
					yt_links: ["LsFIoCyYO6w", "-P8XpYW7M30"],
					gh_links: [{url: "https://github.com/AEFeinstein/Super-2020-Swadge-HW", text: "Github Repo (Hardware)"},
							   {url: "https://github.com/AEFeinstein/Super-2020-Swadge-FW", text: "Github Repo (Firmware)"}],
					sw_links: ["https://swadge.com/super2020/"],
					imgs: ["swadge-barrel.png", "swadge-banana.png"],
					manuals: []
				},
				{
					year: 2022,
					name: "Chainsaw",
					desc: "TODO Description",
					yt_links: ["FrPT_xJY5Cg", "T_qtopoaOnc", "riSsZ8UFYVM", "p-Y-TKsqngA", "jN81-Q4-cWM", "ywYTDOBF1Ls"],
					gh_links: [{url: "https://github.com/AEFeinstein/Super-2022-Swadge-HW", text: "Github Repo (Hardware)"},
							   {url: "https://github.com/AEFeinstein/Super-2022-Swadge-FW", text: "Github Repo (Firmware)"}],
					sw_links: ["https://swadge.com/super2022/"],
					imgs: ["chainsaw.png"],
					manuals: ["2022_manual.pdf"]
				},
				{
					year: 2023,
					name: "Squarewavebird",
					desc: "TODO Description",
					yt_links: ["AdtCOf92yiQ", "Zd1CDvDD4Y0", "ZYPWSUe8KeU"],
					gh_links: [{url: "https://github.com/AEFeinstein/Super-2023-Swadge-HW", text: "Github Repo (Hardware)"},
							   {url: "https://github.com/AEFeinstein/Super-2023-Swadge-FW", text: "Github Repo (Firmware)"}],
					sw_links: ["https://swadge.com/super2023/"],
					imgs: ["squarewavebird.png"],
					manuals: ["2023_manual.pdf"]
				}
			];

			function typeOf(obj) {
				return {}.toString.call(obj).split(' ')[1].slice(0, -1).toLowerCase();
			}

			function replaceTextByClass(node, text_class, text) {
				var div = node.querySelector(text_class);
				div.textContent = div.textContent.replace("TEXT", text);
			}

			function replaceHtmlByClass(node, text_class, text) {
				var div = node.querySelector(text_class);
				div.innerHTML = div.textContent.replace("TEXT", text);
			}

			function removeDivByClass(node, text_class) {
				var div = node.querySelector(text_class);
				div.remove();
			}

			function showContent() {

				// Create a main item template and grab the element from it
				var m_templ, m_item;
				m_templ = document.getElementById("main_template");
				m_item = m_templ.content.getElementById("ANCHOR");

				// Create a sidebar template and grab the element from it
				var s_templ, s_item;
				s_templ = document.getElementById("sidebar_template");
				s_item = s_templ.content.getElementById("sidebar_link");

				// for each item in the array:
				var idx;
				for (idx = 0; idx < data.length; idx++) {

					// Create a new node, based on the main item template, with an ancor destination
					var m_node = document.importNode(m_item, true);
					m_node.setAttribute("id", data[idx].name)

					// Do text replacement:
					replaceTextByClass(m_node, ".item_title", data[idx].name);
					replaceTextByClass(m_node, ".item_desc", data[idx].desc);

					// Build out Github links
					if(data[idx].gh_links.length > 0) {
						var gh_txt = "<ul>";
						var ghIdx;
						for(ghIdx = 0; ghIdx < data[idx].gh_links.length; ghIdx++) {
							gh_txt += "<li><a href=\"" + data[idx].gh_links[ghIdx].url + "\">" + data[idx].gh_links[ghIdx].text + "</a></li>"
						}
						gh_txt += "</ul>"
						replaceHtmlByClass(m_node, ".item_github", gh_txt);
					}
					else{
						removeDivByClass(m_node, ".gh_link_container");
					}

					// Build out Swadge.com links
					if(data[idx].sw_links.length > 0) {
						var sw_txt = "<ul>";
						var swIdx;
						for(swIdx = 0; swIdx < data[idx].sw_links.length; swIdx++) {
							sw_txt += "<li><a href=\"" + data[idx].sw_links[swIdx] + "\">" + data[idx].sw_links[swIdx] + "</a></li>"
						}
						sw_txt += "</ul>"
						replaceHtmlByClass(m_node, ".item_swadge_com", sw_txt);
					}
					else{
						removeDivByClass(m_node, ".sw_link_container");
					}

					// Build out manual links
					if(data[idx].manuals.length > 0) {
						var mn_txt = "<ul>";
						var mnIdx;
						for(mnIdx = 0; mnIdx < data[idx].manuals.length; mnIdx++) {
							mn_txt += "<li><a href=\"swadge_imgs\\" + data[idx].manuals[mnIdx] + "\">" + data[idx].manuals[mnIdx] + "</a></li>"
						}
						mn_txt += "</ul>"
						replaceHtmlByClass(m_node, ".item_swadge_manuals", mn_txt);
					}
					else{
						removeDivByClass(m_node, ".mn_link_container");
					}

					// Build out static images
					if(data[idx].imgs.length > 0) {
						var imgIdx;
						var img_txt = "";
						for(imgIdx = 0; imgIdx < data[idx].imgs.length; imgIdx++) {
							img_txt += "<img src=\"swadge_imgs/" + data[idx].imgs[imgIdx] + "\" height=\"315\">"
						}
						replaceHtmlByClass(m_node, ".imgs_container", img_txt);
					}
					else{
						removeDivByClass(m_node, ".imgs_container");
					}

					// Build out Youtube links
					if(data[idx].yt_links.length > 0) {
						var yt_txt = "";
						var ytIdx;
						for(ytIdx = 0; ytIdx < data[idx].yt_links.length; ytIdx++) {
							yt_txt += "<div class=\"youtube-player\" data-id=\"" + data[idx].yt_links[ytIdx] + "\"></div>"
						}
						replaceHtmlByClass(m_node, ".yt_link_container", yt_txt);
						// replaceTextByClass(m_node, ".yt_link_container", "INSERT YOUTUBE CONTENT HERE");
					}
					else{
						removeDivByClass(m_node, ".yt_link_container");
					}

					// Append the new node to the main content:
					document.getElementById("main_content").appendChild(m_node);

					// Create a new node, based on the sidebar template:
					var s_node = document.importNode(s_item, true);
					// Create an anchor link
					s_node.querySelector("a").setAttribute("href", "#" + data[idx].name)
					replaceTextByClass(s_node, ".w3-bar-item", data[idx].name);
					// Append the node to the sidebar
					document.getElementById("sidebar").appendChild(s_node);
				}
				
				initYouTubeVideos();
			}

			/*
			 * Light YouTube Embeds by @labnol
			 * Credit: https://www.labnol.org/
			 */

			function labnolIframe(div) {
				var iframe = document.createElement('iframe');
				iframe.setAttribute('src', 'https://www.youtube.com/embed/' + div.dataset.id + '?autoplay=1&rel=0');
				iframe.setAttribute('frameborder', '0');
				iframe.setAttribute('allowfullscreen', '1');
				iframe.setAttribute('allow', 'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture');
				div.parentNode.replaceChild(iframe, div);
			}

			function initYouTubeVideos() {
				var playerElements = document.getElementsByClassName('youtube-player');
				for (var n = 0; n < playerElements.length; n++) {
					var videoId = playerElements[n].dataset.id;
					var div = document.createElement('div');
					div.setAttribute('data-id', videoId);
					var thumbNode = document.createElement('img');
					thumbNode.src = 'https://i.ytimg.com/vi/ID/hqdefault.jpg'.replace('ID', videoId);
					div.appendChild(thumbNode);
					var playButton = document.createElement('div');
					playButton.setAttribute('class', 'play');
					div.appendChild(playButton);
					div.onclick = function () {
						labnolIframe(this);
					};
					playerElements[n].appendChild(div);
				}
			}
			
			// Run this function on page load
			window.onload = showContent;
		</script>
	</head>
	<body>

		<!-- Sidebar -->
		<div class="w3-sidebar w3-light-grey w3-bar-block" style="width:25%" id="sidebar">
			<h3 class="w3-bar-item"></h3>
			<!-- content added via template -->
		</div>

		<!-- Page Content -->
		<div style="margin-left:25%">
			<div class="w3-container w3-teal">
				<h1>Swadge History</h1>
			</div>
			<div class="w3-container" id="main_content">
				<ul>
					<li><a href="https://photos.google.com/share/AF1QipPLuKIJAFl__YM99s27YNtrL8kk5-zIjjxqxU3z837qvz2xMR4AGMbx1iFKQr_Ivg?key=RXYwS0tzSFE0azRXb0RQRWxRMGhqbEh0eWlMdmNR">Google Photo Album</a></li>
					<li><a href="https://docs.google.com/document/d/1zuJ04DWmYMRNDTC8mrsMKL4H1TFm8wToW_LboJRVXCU/edit">Google Doc</a></li>
				</ul>
				<!-- content added via template -->
			</div>
		</div>

	</body>
</html>
